(this["webpackJsonpstar-game"]=this["webpackJsonpstar-game"]||[]).push([[0],{13:function(e,t,n){},14:function(e,t,n){},16:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),c=n(7),i=n.n(c),u=(n(13),n(2)),o=(n(14),n(8)),s=Object.freeze({PLAYING:Symbol("playing"),WON:Symbol("won"),LOSE:Symbol("lose")}),l=Object.freeze({available:{color:"black",backgroundColor:"lightgray"},used:{color:"white",backgroundColor:"lightgreen"},wrong:{color:"white",backgroundColor:"lightcoral"},candidate:{color:"white",backgroundColor:"deepskyblue"}}),b=n(6),j=function(e,t){return Array.from({length:t},(function(t,n){return n+e}))},d=function(e){return e.reduce((function(e,t){return e+t}),0)},f=function(e,t,n){if(1===e.length)return e[0];var r=new Set;r.add(d(e));var a,c=Object(b.a)(e);try{var i=function(){var t=a.value;r.add(t);var n=e.filter((function(e){return e!==t}));r.add(d(n));var c,i=Object(b.a)(n);try{for(i.s();!(c=i.n()).done;){var u=c.value;r.add(t+u)}}catch(o){i.e(o)}finally{i.f()}};for(c.s();!(a=c.n()).done;)i()}catch(o){c.e(o)}finally{c.f()}var u=Array.from(r.values());return function(e){return e[e.length*Math.random()|0]}(t&&n?u.filter((function(e){return e>=t&&e<=n})):u)},m=function(e){var t=e.maxStarsCount,n=e.maxGuessCount,a=e.timeout,c=function(e){return f(e,1,n)},i=Object(r.useState)(j(1,t)),o=Object(u.a)(i,2),l=o[0],b=o[1],m=Object(r.useState)(c(l)),O=Object(u.a)(m,2),g=O[0],v=O[1],h=Object(r.useState)([]),C=Object(u.a)(h,2),x=C[0],y=C[1],S=Object(r.useState)(s.PLAYING),N=Object(u.a)(S,2),k=N[0],p=N[1],w=Object(r.useState)(a),P=Object(u.a)(w,2),T=P[0],A=P[1];return{availableNumbers:l,starsCount:g,candidateNumbers:x,gameState:k,setNewCandidates:function(e){return d(e)===g?function(e,t){var n=e.filter((function(e){return!t.includes(e)}));y([]),b(n),v(c(n)),0===n.length&&p(s.WON),n.length>0&&A(a)}(l,e):y(e)},time:T,setTime:A,setTimeout:function(){p(s.LOSE)}}},O=n(0),g=function(){return Object(O.jsx)("span",{className:"star",children:"\u2b50"})},v=function(e){var t=e.gameState,n=e.onPlayAgainClick;return Object(O.jsxs)("div",{className:"play-again",children:[Object(O.jsx)("span",{style:{marginRight:"0.5rem"},children:t===s.WON?"Won":"Lose"}),Object(O.jsx)("button",{onClick:n,children:"Play again"})]})},h=function(e){var t=e.gameState,n=e.starsCount,r=e.onPlayAgainClick;return Object(O.jsx)(O.Fragment,{children:t===s.PLAYING?Object(O.jsx)("div",{className:"display",children:j(1,n).map((function(e){return Object(O.jsx)(g,{},e)}))}):Object(O.jsx)(v,{gameState:t,onPlayAgainClick:r})})},C=function(e){var t=e.number,n=e.status,r=e.onClick,a=n.color,c=n.backgroundColor;return Object(O.jsx)("button",{className:"number-button",style:{color:a,backgroundColor:c},onClick:r(t,n),children:t})},x=function(e){var t=e.count,n=e.statusFn,r=e.onClick;return Object(O.jsx)("div",{className:"display",children:j(1,t).map((function(e){return Object(O.jsx)(C,{number:e,status:n(e),onClick:r},e)}))})},y=Object(r.createContext)({time:void 0,setTime:function(e){}}),S=function(e){var t=e.isRunning,n=e.onTimeout,a=Object(r.useContext)(y),c=a.time,i=a.setTime;return function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],a=Object(r.useRef)();Object(r.useEffect)((function(){a.current=e})),Object(r.useEffect)((function(){if(n){var e=setInterval((function(){a.current()}),t);return function(){return clearInterval(e)}}}),[t,n])}((function(){var e=c-1;i(e),0===e&&n()}),1e3,t),Object(O.jsxs)("pre",{className:"timer",children:["Timeout: ",c]})},N=function(e){var t=e.startNewGame,n={maxStarsCount:9,maxGuessCount:18,timeout:10},r=m(n),a=r.starsCount,c=r.availableNumbers,i=r.candidateNumbers,u=r.gameState,b=r.setNewCandidates,j=r.time,f=r.setTime,g=r.setTimeout,v=l.used,C=l.available,N=l.candidate,k=l.wrong;return Object(O.jsxs)("main",{children:[Object(O.jsxs)("header",{children:[Object(O.jsxs)("pre",{children:["Current: ",a]}),Object(O.jsxs)("pre",{children:["Available: [",c.join(", "),"]"]}),Object(O.jsxs)("pre",{children:["Candidates: [",i.join(", "),"]"]}),Object(O.jsxs)("pre",{children:["Candidates sum: ",d(i)]}),Object(O.jsx)(y.Provider,{value:{time:j,setTime:f},children:Object(O.jsx)(S,{isRunning:u===s.PLAYING,onTimeout:g})})]}),Object(O.jsxs)("div",{className:"content",children:[Object(O.jsx)(h,{gameState:u,starsCount:a,onPlayAgainClick:t}),Object(O.jsx)(x,{count:n.maxStarsCount,statusFn:function(e){return i.includes(e)?d(i)<=a?N:k:c.includes(e)?C:v},onClick:function(e,t){return function(){if(t!==v){var n=t===N||t===k?i.filter((function(t){return t!==e})):[e].concat(Object(o.a)(i));b(n)}}}})]})]})};var k=function(){var e=Object(r.useState)(1),t=Object(u.a)(e,2),n=t[0],a=t[1];return Object(O.jsx)(N,{startNewGame:function(){return a(n+1)}},n)},p=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,17)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,c=t.getLCP,i=t.getTTFB;n(e),r(e),a(e),c(e),i(e)}))};i.a.render(Object(O.jsx)(a.a.StrictMode,{children:Object(O.jsx)(k,{})}),document.getElementById("root")),p()}},[[16,1,2]]]);
//# sourceMappingURL=main.d6ede076.chunk.js.map